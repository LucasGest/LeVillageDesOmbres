<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Loup-Garou de Thiercelieux</title>
		<link rel="stylesheet" href="css/style.css" />
	</head>
    
	<body>
		<div class="game-container">
			<h1>Loup-Garou de Thiercelieux</h1>

			<div id="players-section">
				<div id="welcome-section">
					<h1>Bienvenue au Loup-Garou de Thiercelieux !</h1>
					<button id="start-btn">Commencer</button>
				</div>

				<div id="game-section" style="display: none">
					<h2>Joueurs inscrits :</h2>
					<ul id="players-list"></ul>
					<button id="assign-roles-btn">Tirer les rôles</button>
				</div>

				<h2>Joueurs</h2>
				<ul id="players-list"></ul>
				<button id="start-game-btn">Commencer la partie</button>
			</div>

			<!-- Section chat -->
			<div id="chat-section">
				<h2>Chat</h2>
				<div id="chat-box"></div>
				<input type="text" id="chat-input" placeholder="Écrire un message..." />
				<button id="send-chat-btn">Envoyer</button>
			</div>

			<!-- Section jour/nuit -->
			<div id="day-night-section">
				<h2 id="phase-title">Phase : Jour</h2>
				<p>Temps restant : <span id="timer">03:00</span></p>
				<button id="vote-btn">Voter</button>
			</div>
		</div>
        <script src="js/index.js"></script>

		<script type="module">
  // Import des librairies Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getDatabase, ref, push, set, onChildAdded, onValue } 
    from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

  // ⚠️ Mets ici la config donnée par Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyA181_gZwR6YfqhFiZkJ7IZKVSi9Qn1A8s",
    authDomain: "loup-garou-b0b31.firebaseapp.com",
    databaseURL: "https://loup-garou-b0b31-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "loup-garou-b0b31",
    storageBucket: "loup-garou-b0b31.firebasestorage.app",
    messagingSenderId: "559349895784",
    appId: "1:559349895784:web:0caac5eda9d13bc48521dd",
    measurementId: "G-0G25P8RGFW"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Exemple : créer/join une room
  const roomId = "LG123"; // tu peux générer un code unique
  const username = "Alice";

  // Référence des joueurs
  const playersRef = ref(db, `rooms/${roomId}/players`);
  const chatRef = ref(db, `rooms/${roomId}/messages`);

  // Ajouter un joueur
  push(playersRef, username);

  // Écouter la liste des joueurs
  onValue(playersRef, (snapshot) => {
    const players = snapshot.val();
    console.log("Joueurs dans la partie :", players);
  });

  // Envoyer un message
  function sendMessage(message) {
    push(chatRef, { username, message });
  }

  // Écouter les nouveaux messages
  onChildAdded(chatRef, (snapshot) => {
    const msg = snapshot.val();
    console.log(`${msg.username}: ${msg.message}`);
  });
</script>
	</body>
</html>
